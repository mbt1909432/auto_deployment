var E=Object.defineProperty;var P=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var k=(l,a,e)=>a in l?E(l,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[a]=e,z=(l,a)=>{for(var e in a||(a={}))F.call(a,e)&&k(l,e,a[e]);if(P)for(var e of P(a))N.call(a,e)&&k(l,e,a[e]);return l};var u=(l,a,e)=>new Promise((d,f)=>{var h=i=>{try{m(e.next(i))}catch(n){f(n)}},g=i=>{try{m(e.throw(i))}catch(n){f(n)}},m=i=>i.done?d(i.value):Promise.resolve(i.value).then(h,g);m((e=e.apply(l,a)).next())});import{g as T,d as U}from"./issue-3BhAe7N2.js";import{u as j,_ as H}from"./Table.vue_vue_type_script_lang-DhqtaXqw.js";import{t as _}from"./index-YxwiwpWh.js";/* empty css                  *//* empty css               */import{_ as J}from"./Search.vue_vue_type_script_setup_true_lang-Bsk-wcQO.js";import{_ as M}from"./ContentWrap.vue_vue_type_script_setup_true_lang-PmTq9VSX.js";import{u as q}from"./dict-CgALl-GC.js";import{l as G,aB as K,a as b,J as A,O as r,P as C,V as v,m as Q,S as W,R as c,u as t,B as L}from"./vue-chunks-DM5Q6aJS.js";import{z as X,n as Y,h as Z}from"./element-plus-c7Yb662V.js";/* empty css                       *//* empty css                 *//* empty css                   *//* empty css                        *//* empty css               */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  */import"./useForm-LIKgH9QM.js";/* empty css                          *//* empty css                       *//* empty css                       *//* empty css                *//* empty css                   *//* empty css                    */import"./style.css_vue_type_style_index_0_src_true_lang-DrgVQkG7.js";import"./wang-editor-kNnY1XhY.js";/* empty css                   *//* empty css                    *//* empty css                        *//* empty css                *//* empty css                         */import"./_Uint8Array-DKqHwQen.js";import"./useIcon-BBhEVmD6.js";import"./dict-C2OSXRrB.js";const Ve=G({name:"HelpIssue",__name:"Issue",setup(l){const{push:a}=K(),{tableRegister:e,tableState:d,tableMethods:f}=j({fetchDataApi:()=>u(this,null,function*(){const{pageSize:o,currentPage:s}=d,p=yield T(z({page:t(s),limit:t(o)},t(S)));return{list:p.data||[],total:p.count||0}}),fetchDelApi:o=>u(this,null,function*(){return(yield U(o)).code===200})}),{dataList:h,loading:g,total:m,pageSize:i,currentPage:n}=d,{getList:y,delList:O}=f,x=b([]);u(this,null,function*(){const s=yield q().getDictObj(["sys_vadmin_platform"]);x.value=s.sys_vadmin_platform});const D=A([{field:"id",label:"编号",show:!0,disabled:!0,width:"120px"},{field:"category.name",label:"类别名称",width:"200px",show:!0,disabled:!0},{field:"title",label:"标题",show:!0},{field:"view_number",label:"查看次数",show:!0,width:"100px"},{field:"is_active",label:"是否可见",show:!0,width:"100px",slots:{default:o=>{const s=o.row;return r(C,null,[r(X,{modelValue:s.is_active,disabled:!0},null)])}}},{field:"create_datetime",label:"创建时间",show:!0,width:"200px",sortable:!0},{field:"create_user.name",label:"创建人",show:!0,width:"100px"},{field:"action",width:"120px",label:"操作",show:!0,slots:{default:o=>{const s=o.row;return r(C,null,[r(_,{type:"primary",link:!0,size:"small",onClick:()=>B(s)},{default:()=>[v("编辑")]}),r(_,{type:"danger",loading:w.value,link:!0,size:"small",onClick:()=>$(s)},{default:()=>[v("删除")]})])}}}]),I=A([{field:"name",label:"类别名称",component:"Input",componentProps:{clearable:!0,style:{width:"214px"}}},{field:"platform",label:"登录平台",component:"Select",componentProps:{style:{width:"214px"},options:x.value}},{field:"is_active",label:"是否可见",component:"Select",componentProps:{style:{width:"214px"},options:[{label:"可见",value:!0},{label:"不可见",value:!1}]}}]),S=b({}),R=o=>{n.value=1,S.value=o,y()},w=b(!1),$=o=>u(this,null,function*(){w.value=!0,yield O(!0,[o.id]).finally(()=>{w.value=!1})}),B=o=>u(this,null,function*(){a(`/help/issue/form?id=${o.id}`)}),V=()=>{a("/help/issue/form")};return(o,s)=>(Q(),W(t(M),null,{default:c(()=>[r(t(J),{schema:I,onReset:R,onSearch:R},null,8,["schema"]),r(t(H),{"current-page":t(n),"onUpdate:currentPage":s[0]||(s[0]=p=>L(n)?n.value=p:null),"page-size":t(i),"onUpdate:pageSize":s[1]||(s[1]=p=>L(i)?i.value=p:null),showAction:"",columns:D,"default-expand-all":"","node-key":"id",data:t(h),loading:t(g),pagination:{total:t(m)},onRegister:t(e),onRefresh:t(y)},{toolbar:c(()=>[r(t(Y),{gutter:10},{default:c(()=>[r(t(Z),{span:1.5},{default:c(()=>[r(t(_),{type:"primary",onClick:V},{default:c(()=>[v("新增常见问题")]),_:1})]),_:1})]),_:1})]),_:1},8,["current-page","page-size","columns","data","loading","pagination","onRegister","onRefresh"])]),_:1}))}});export{Ve as default};
