var u=(m,t,s)=>new Promise((l,n)=>{var i=e=>{try{a(s.next(e))}catch(o){n(o)}},c=e=>{try{a(s.throw(e))}catch(o){n(o)}},a=e=>e.done?l(e.value):Promise.resolve(e.value).then(i,c);a((s=s.apply(m,t)).next())});import{u as P,F as v}from"./useForm-LIKgH9QM.js";import{u as b}from"./useValidator-dibMbM3d.js";import{u as k,t as y,p as x}from"./index-YxwiwpWh.js";import{b as f}from"./element-plus-c7Yb662V.js";import{l as F,J as V,a as D,m as R,S,u as g,O as p,V as B,P as C}from"./vue-chunks-DM5Q6aJS.js";const J=F({__name:"PasswordWrite",setup(m){const{required:t}=b(),s=k(),l=V([{field:"title",colProps:{span:24}},{field:"password",label:"新密码",component:"InputPassword",colProps:{span:24},componentProps:{style:{width:"50%"},placeholder:"请输入新密码"}},{field:"password_two",label:"确认密码",component:"InputPassword",colProps:{span:24},componentProps:{style:{width:"50%"},placeholder:"请再次输入新密码"}},{field:"save",colProps:{span:24},formItemProps:{slots:{default:()=>p(C,null,[p("div",{class:"w-[50%]"},[p(y,{loading:d.value,type:"primary",class:"w-[100%]",onClick:w},{default:()=>[B("保存")]})])])}}}]),n={password:[t(),{min:8,max:16,message:"长度需为8-16个字符,请重新输入。",trigger:"blur"}],password_two:[t(),{min:8,max:16,message:"长度需为8-16个字符,请重新输入。",trigger:"blur"}]},{formRegister:i,formMethods:c}=P(),{setValues:a,getFormData:e,getElFormExpose:o}=c;a(s.getUser);const d=D(!1),w=()=>u(this,null,function*(){if(s.getUser.id===1)return f.warning("编辑账号为演示账号，无权限操作！");const r=yield o();if(yield r==null?void 0:r.validate()){d.value=!0;const h=yield e();try{(yield x(h))&&(r==null||r.resetFields(),s.logout(),f.warning("请重新登录"))}finally{d.value=!1}}});return(r,_)=>(R(),S(g(v),{onRegister:g(i),schema:l,rules:n,"hide-required-asterisk":"",class:"dark:border-1 dark:border-[var(--el-border-color)] dark:border-solid"},null,8,["onRegister","schema"]))}});export{J as _};
